CREATE OR REPLACE TRIGGER MIN_JUGADORES_PAR_LOC
BEFORE INSERT ON PARTIDOS_LOCALES
FOR EACH ROW
DECLARE
    V_NUM_JUGADORES NUMBER;
BEGIN
    SELECT COUNT(*) INTO V_NUM_JUGADORES 
    FROM EQUIPOS_JUGADORES 
    WHERE ID_JUGADOR IN (SELECT ID_JUGADOR
                         FROM JUGADORES
                         WHERE TIPO_JUGADOR = 'HABITUAL'
                         );
    IF V_NUM_JUGADORES < 8 THEN
        RAISE_APPLICATION_ERROR(-20000, 'SE NECESITAN AL MENOS 8 JUGADORES EN EL EQUIPO DE TIPO HABITUAL');
    END IF;
END MIN_JUGADORES_PAR_LOC;

CREATE OR REPLACE TRIGGER MIN_JUGADORES_PAR_VIS
BEFORE INSERT ON PARTIDOS_VISITANTES
FOR EACH ROW
DECLARE
    V_NUM_JUGADORES NUMBER;
BEGIN
    SELECT COUNT(*) INTO V_NUM_JUGADORES 
    FROM EQUIPOS_JUGADORES 
    WHERE ID_JUGADOR IN (SELECT ID_JUGADOR
                         FROM JUGADORES
                         WHERE TIPO_JUGADOR = 'HABITUAL'
                         );
    IF V_NUM_JUGADORES < 8 THEN
        RAISE_APPLICATION_ERROR(-20000, 'SE NECESITAN AL MENOS 8 JUGADORES EN EL EQUIPO DE TIPO HABITUAL');
    END IF;
 EXCEPTION
    WHEN OTHERS THEN
        RAISE_APPLICATION_ERROR(-20004,'ERROR (SQL ERROR)');
END MIN_JUGADORES_PAR_VIS;